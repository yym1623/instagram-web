import{g as H,l as J,o as s,s as X,c as a,A as S,a as e,n as t,p as m,t as C,q as y,F as Q,r as q,y as Y,B as ee,C as te,T as le,x as c,v as w,P as re,_ as ie,R as ce,j as se,k as ue,m as de,G as fe,b as N,N as W,w as Z,M as K,a8 as ge}from"./qrGIMbRh.js";const xe={class:"flex items-center justify-between px-4 py-1 border-b border-neutral-800 bg-[rgb(33,35,40)] text-white"},pe={class:"flex items-center gap-3"},ve={key:1,class:"w-8 h-8"},be={class:"flex-1 flex justify-center"},me={class:"text-sm font-semibold"},he={class:"flex items-center gap-2"},ye=["disabled"],we=["disabled"],ke={key:0,class:"flex-1 flex items-center justify-center bg-[rgb(33,35,40)]"},_e={key:1,class:"flex-1 flex flex-col bg-[rgb(33,35,40)]"},je={class:"flex-1 flex items-center justify-center"},Ce={class:"w-full h-[560px] bg-[rgb(33,35,40)] flex items-center justify-center"},$e=["src"],Me={key:2,class:"flex-1 flex flex-col lg:flex-row bg-[rgb(33,35,40)]"},Fe={class:"relative w-full lg:w-2/3 bg-[rgb(33,35,40)] flex items-center justify-center"},Ae=["src"],Re={class:"w-full lg:w-1/3 border-t lg:border-t-0 lg:border-l border-neutral-800 flex flex-col bg-[rgb(33,35,40)] max-h-[520px]"},Be={class:"flex border-b border-neutral-800 text-xs font-semibold"},Pe={key:0,class:"overflow-y-auto px-4 py-3 grid grid-cols-3 gap-3"},De=["onClick"],Te=["src"],Oe={key:1,class:"px-4 py-3 text-xs text-neutral-400"},Se={key:3,class:"flex-1 flex flex-col lg:flex-row bg-[rgb(33,35,40)]"},ze={class:"relative w-full lg:w-2/3 bg-[rgb(33,35,40)] flex items-center justify-center"},Ee=["src"],Le={class:"w-full lg:w-1/3 border-t lg:border-t-0 lg:border-l border-neutral-800 flex flex-col bg-[rgb(33,35,40)] max-h-[520px]"},Ne={class:"flex items-center gap-3 px-4 py-3"},Ue={class:"text-sm font-semibold text-white truncate"},Ve={class:"flex-1 px-4 py-3 overflow-y-auto"},Ie={key:0,class:"mt-2 text-xs text-red-400"},Ge={key:4,class:"flex-1 flex items-center justify-center p-10 bg-[rgb(33,35,40)]"},Qe=H({__name:"CreateFeed",props:{open:{type:Boolean}},emits:["close","created"],setup(F,{emit:k}){const A=k,d=J(),n=c(1),$=c(!1),f=c(!1),_=c(""),h=c([]),P=c(0),M=c(!1),g=c(""),D=[{key:"original",label:"원본"},{key:"clarendon",label:"Clarendon"},{key:"gingham",label:"Gingham"},{key:"juno",label:"Juno"},{key:"moon",label:"Moon"},{key:"lark",label:"Lark"}],v=c("original"),j=c("filter"),b=w(()=>h.value[P.value]??null),T=w(()=>f.value?"새 게시물 만들기":n.value===2?"자르기":n.value===3?"편집":"새 게시물 만들기");function R(x){switch(x){case"clarendon":return"filter-clarendon";case"gingham":return"filter-gingham";case"juno":return"filter-juno";case"moon":return"filter-moon";case"lark":return"filter-lark";default:return"filter-original"}}const z=w(()=>R(v.value)),U=w(()=>n.value===1||n.value===2?"w-full max-w-[620px]":"w-full max-w-[480px] lg:max-w-[960px]");function V(){n.value=1,$.value=!1,f.value=!1,_.value="",h.value=[],P.value=0,v.value="original",g.value=""}function O(){V(),A("close")}function I(){$.value=!0}function E(){$.value=!1}function u(x){!x||!x.length||(L(x),$.value=!1)}function o(x){const r=x.target?.files;!r||!r.length||L(r)}async function L(x){const l=[];for(let r=0;r<x.length;r+=1){const p=x[r],B=await i(p);l.push({file:p,src:B})}l.length&&(h.value=[...h.value,...l],P.value=0,f.value=!1,n.value=2)}function i(x){return new Promise((l,r)=>{const p=new FileReader;p.onload=B=>{l(B.target?.result||"")},p.onerror=()=>r(new Error("파일을 읽는 중 오류가 발생했습니다.")),p.readAsDataURL(x)})}function G(){if(f.value){f.value=!1,n.value=1;return}n.value===2?(h.value=[],_.value="",v.value="original",n.value=1):n.value>2&&(n.value-=1)}function ae(){n.value===2?n.value=3:n.value===3&&(n.value=4)}async function ne(){if(!(!h.value.length||M.value)){M.value=!0,g.value="";try{const r=`${re().public.apiBase}/posts`,p=new FormData;h.value.forEach(({file:oe})=>{p.append("myfile",oe)}),p.append("email",d.email),p.append("name",d.name),p.append("nickname",d.nickname),p.append("write",_.value||"");const B=await fetch(r,{method:"POST",body:p});if(!B.ok)throw new Error(await B.text());f.value=!0,A("created"),setTimeout(()=>{O()},1500)}catch{g.value="업로드 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요."}finally{M.value=!1}}}return(x,l)=>(s(),X(le,{to:"body"},[F.open?(s(),a("div",{key:0,class:"fixed inset-0 z-[120] flex items-center justify-center bg-black/25 px-3 py-6",onClick:S(O,["self"])},[e("div",{class:y([t(U),"bg-[rgb(33,35,40)] rounded-2xl shadow-2xl border border-neutral-200 dark:border-neutral-800 overflow-hidden flex flex-col"])},[e("header",xe,[e("div",pe,[t(n)>1||t(f)?(s(),a("button",{key:0,type:"button",class:"w-8 h-8 flex items-center justify-center rounded-full text-neutral-300 hover:bg-neutral-800","aria-label":"뒤로",onClick:G},[...l[5]||(l[5]=[e("i",{class:"fa-solid fa-arrow-left text-base"},null,-1)])])):t(n)===1?(s(),a("div",ve)):m("",!0)]),e("div",be,[e("h2",me,C(t(T)),1)]),e("div",he,[!t(f)&&(t(n)===2||t(n)===3)?(s(),a("button",{key:0,type:"button",class:"text-sm font-semibold text-blue-400 hover:text-blue-300 disabled:opacity-40 disabled:cursor-not-allowed",disabled:!t(h).length,onClick:ae}," 다음 ",8,ye)):!t(f)&&t(n)===4?(s(),a("button",{key:1,type:"button",class:"text-sm font-semibold text-blue-400 hover:text-blue-300 disabled:opacity-40 disabled:cursor-not-allowed",disabled:!t(h).length||t(M),onClick:ne},C(t(M)?"업로드 중...":"공유하기"),9,we)):m("",!0),t(n)===1?(s(),a("button",{key:2,type:"button",class:"w-8 h-8 flex items-center justify-center rounded-full text-neutral-400 hover:bg-neutral-800","aria-label":"닫기",onClick:O},[...l[6]||(l[6]=[e("i",{class:"fa-solid fa-xmark text-base"},null,-1)])])):m("",!0)])]),t(n)===1&&!t(f)?(s(),a("div",ke,[e("div",{class:y(["w-full h-[560px] flex flex-col items-center justify-center text-center p-6 transition-colors",t($)?"bg-blue-900/10":""]),onDrop:l[0]||(l[0]=S(r=>u(r.dataTransfer?.files||null),["prevent"])),onDragover:l[1]||(l[1]=S(()=>{},["prevent"])),onDragenter:I,onDragleave:E},[l[7]||(l[7]=e("div",{class:"mb-6 flex items-center justify-center"},[e("svg",{width:"80",height:"80",viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"text-neutral-200"},[e("g",{opacity:"0.9"},[e("rect",{x:"8",y:"8",width:"48",height:"48",rx:"4",stroke:"currentColor","stroke-width":"2",fill:"none"}),e("path",{d:"M12 44 Q20 36, 28 44 T44 44",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round"}),e("circle",{cx:"20",cy:"20",r:"4",fill:"currentColor"})]),e("g",{opacity:"0.9"},[e("rect",{x:"24",y:"24",width:"48",height:"48",rx:"4",stroke:"currentColor","stroke-width":"2",fill:"none"}),e("path",{d:"M38 36 L38 52 L52 44 Z",fill:"currentColor"})])])],-1)),l[8]||(l[8]=e("p",{class:"text-sm font-semibold text-neutral-50 mb-3"}," 사진과 동영상을 여기에 끌어다 놓으세요 ",-1)),l[9]||(l[9]=e("label",{for:"create-file-input",class:"inline-flex items-center justify-center px-5 py-2 rounded-lg text-sm font-semibold text-white bg-blue-500 hover:bg-blue-600 cursor-pointer"}," 컴퓨터에서 선택 ",-1)),e("input",{id:"create-file-input",class:"hidden",type:"file",name:"myfile",multiple:"",accept:"image/*,video/*",onChange:o},null,32)],34)])):t(n)===2&&!t(f)?(s(),a("div",_e,[e("div",je,[e("div",Ce,[t(b)?(s(),a("img",{key:0,src:t(b).src,class:"w-full h-full object-contain",alt:""},null,8,$e)):m("",!0)])])])):t(n)===3&&!t(f)?(s(),a("div",Me,[e("div",Fe,[t(b)?(s(),a("img",{key:0,src:t(b).src,class:y(["max-h-[520px] w-full object-contain",t(z)]),alt:""},null,10,Ae)):m("",!0)]),e("div",Re,[e("div",Be,[e("button",{type:"button",class:y(["flex-1 px-4 py-3 text-center",t(j)==="filter"?"text-white border-b border-white":"text-neutral-500"]),onClick:l[2]||(l[2]=r=>j.value="filter")}," 필터 ",2),e("button",{type:"button",class:y(["flex-1 px-4 py-3 text-center",t(j)==="adjust"?"text-white border-b border-white":"text-neutral-500"]),onClick:l[3]||(l[3]=r=>j.value="adjust")}," 조정 ",2)]),t(j)==="filter"?(s(),a("div",Pe,[(s(),a(Q,null,q(D,r=>e("button",{key:r.key,type:"button",class:"flex flex-col items-center text-xs text-neutral-300 focus:outline-none",onClick:p=>v.value=r.key},[e("div",{class:y(["w-20 h-20 rounded-lg overflow-hidden mb-1 border",t(v)===r.key?"border-blue-400":"border-transparent"])},[t(b)?(s(),a("img",{key:0,src:t(b).src,class:y(["w-full h-full object-cover",R(r.key)]),alt:""},null,10,Te)):m("",!0)],2),e("span",{class:y(t(v)===r.key?"text-white":"text-neutral-400")},C(r.label),3)],8,De)),64))])):(s(),a("div",Oe," 조정 탭은 추후 추가 예정입니다. "))])])):t(n)===4&&!t(f)?(s(),a("div",Se,[e("div",ze,[t(b)?(s(),a("img",{key:0,src:t(b).src,class:y(["max-h-[520px] w-full object-contain",t(z)]),alt:""},null,10,Ee)):m("",!0)]),e("div",Le,[e("div",Ne,[l[10]||(l[10]=e("div",{class:"w-8 h-8 rounded-full bg-neutral-700 flex-shrink-0"},null,-1)),e("div",Ue,C(t(d).nickname||t(d).name),1)]),e("div",Ve,[Y(e("textarea",{"onUpdate:modelValue":l[4]||(l[4]=r=>te(_)?_.value=r:null),rows:"4",class:"w-full resize-none border-0 bg-transparent text-sm text-white placeholder-neutral-500 outline-none",placeholder:"문구 입력..."},null,512),[[ee,t(_)]]),t(g)?(s(),a("p",Ie,C(t(g)),1)):m("",!0)]),l[11]||(l[11]=e("div",{class:"border-t border-neutral-800 divide-y divide-neutral-800"},[e("button",{type:"button",class:"w-full flex items-center justify-between px-4 py-3 text-sm text-neutral-200 hover:bg-neutral-800/80"},[e("span",null,"위치 추가"),e("i",{class:"fa-solid fa-location-dot text-sm text-neutral-400"})]),e("button",{type:"button",class:"w-full flex items-center justify-between px-4 py-3 text-sm text-neutral-200 hover:bg-neutral-800/80"},[e("span",null,"접근성"),e("i",{class:"fa-solid fa-angle-right text-xs text-neutral-400"})]),e("button",{type:"button",class:"w-full flex items-center justify-between px-4 py-3 text-sm text-neutral-200 hover:bg-neutral-800/80"},[e("span",null,"고급 설정"),e("i",{class:"fa-solid fa-angle-right text-sm text-neutral-400"})])],-1))])])):(s(),a("div",Ge,[...l[12]||(l[12]=[e("div",{class:"text-center space-y-3"},[e("div",{class:"flex justify-center"},[e("div",{class:"w-14 h-14 rounded-full bg-emerald-500/10 flex items-center justify-center"},[e("i",{class:"fa-solid fa-check text-2xl text-emerald-400"})])]),e("p",{class:"text-sm font-semibold text-neutral-50"}," 업로드가 완료되었습니다 "),e("p",{class:"text-xs text-neutral-400"}," 피드가 새로고침되면 새 게시물을 확인할 수 있습니다. ")],-1)])]))],2)])):m("",!0)]))}}),qe=Object.assign(ie(Qe,[["__scopeId","data-v-cac96650"]]),{__name:"ModalsCreateFeed"}),He={class:"flex lg:flex-col items-center lg:items-stretch h-14 lg:h-auto lg:py-2 lg:px-0 border-b lg:border-b-0 border-neutral-200 dark:border-neutral-800 lg:flex-1 lg:justify-between overflow-hidden"},Je={class:"flex lg:flex-col flex-1 lg:flex-none lg:items-stretch lg:w-full lg:-mt-4"},We=["onClick"],Ze={class:"flex items-center justify-center w-6 h-6 shrink-0"},Ke={key:0,class:"hidden lg:inline text-base lg:ml-4 lg:w-0 lg:min-w-0 lg:overflow-hidden lg:opacity-0 lg:whitespace-nowrap lg:group-hover:w-auto lg:group-hover:min-w-0 lg:group-hover:overflow-visible lg:group-hover:opacity-100 lg:transition-[width,opacity] lg:duration-200 lg:ease-out"},Xe={type:"button",class:"flex items-center justify-center w-full lg:w-auto lg:justify-start px-4 lg:pl-5 lg:pr-0 py-3 lg:py-3 my-1 lg:my-1 mx-2 lg:mx-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800/80 text-black dark:text-white"},Ye={key:0,class:"hidden lg:inline text-base lg:ml-4 lg:w-0 lg:min-w-0 lg:overflow-hidden lg:opacity-0 lg:whitespace-nowrap lg:group-hover:w-auto lg:group-hover:min-w-0 lg:group-hover:overflow-visible lg:group-hover:opacity-100 lg:transition-[width,opacity] lg:duration-200 lg:ease-out"},et={class:"p-4 border-b border-neutral-200 dark:border-neutral-800"},tt={class:"flex items-center justify-between mb-4"},lt={class:"flex-1 overflow-y-auto p-4"},st={key:0,class:"space-y-1"},at=["onClick"],nt={class:"text-sm font-bold text-black dark:text-white"},ot={class:"text-sm text-neutral-500 dark:text-neutral-400"},rt={key:1,class:"text-sm text-neutral-500 dark:text-neutral-400 font-bold pb-8"},it=H({__name:"Menu",props:{isMessagePage:{type:Boolean}},setup(F){const k=J(),A=ce(),d=se(),{post:n}=ue(),$=w(()=>d.path==="/"),f=w(()=>d.path==="/reels"),_=w(()=>d.path==="/message"),h=w(()=>d.path==="/notifications"),P=w(()=>d.path===`/${k.name}`||d.params?.id&&d.params.id===k.name),M=w(()=>[{key:"home",label:"홈",to:"/",icon:"fa-solid fa-house",iconActive:"fa-solid fa-house",active:$.value},{key:"search",label:"검색",icon:"fa-solid fa-magnifying-glass",iconActive:"fa-solid fa-magnifying-glass",active:!1},{key:"explore",label:"탐색 탭",icon:"fa-regular fa-compass",iconActive:"fa-solid fa-compass",active:!1},{key:"reels",label:"릴스",icon:"fa-regular fa-circle-play",iconActive:"fa-solid fa-circle-play",active:f.value},{key:"message",label:"메시지",to:"/message",icon:"fa-regular fa-paper-plane",iconActive:"fa-solid fa-paper-plane",active:_.value},{key:"notifications",label:"알림",icon:"fa-regular fa-heart",iconActive:"fa-solid fa-heart",active:h.value},{key:"create",label:"만들기",icon:"fa-solid fa-plus",iconActive:"fa-solid fa-plus",active:!1},{key:"profile",label:"프로필",to:`/${k.name}`,icon:"fa-regular fa-user",iconActive:"fa-solid fa-user",active:P.value}]),g=c(!1),D=c(!1),v=c(""),j=c([]),b=c([]),T=c(null),R=c(null);async function z(){j.value=await n("/users/select",{name:k.name})??[]}function U(u){K(`/${u}`),g.value=!1}function V(){v.value.length>0?b.value=j.value.filter(u=>u.name.includes(v.value)||u.nickname.includes(v.value)):b.value=[]}function O(u){R.value=u}function I(u){if(u.to){K(u.to);return}if(u.key==="search"){g.value=!g.value;return}u.key==="create"&&(D.value=!0)}function E(u){const o=u.target;g.value&&T.value&&!T.value.contains(o)&&R.value&&!R.value.contains(o)&&(g.value=!1)}return de(()=>{z(),document.addEventListener("click",E)}),fe(()=>{document.removeEventListener("click",E)}),(u,o)=>{const L=qe;return s(),a("header",{class:y(`group fixed lg:static left-0 bottom-0 lg:bottom-auto z-[100] w-full ${F.isMessagePage?"lg:w-[78px]":"lg:w-[244px]"} bg-app lg:h-screen flex flex-col`)},[e("nav",He,[o[7]||(o[7]=e("button",{type:"button",class:"flex items-center justify-center w-full lg:w-auto lg:justify-start px-4 lg:pl-5 lg:pr-0 py-3 lg:py-3 my-1 lg:my-1 mx-2 lg:mx-2 text-black dark:text-white hover:opacity-90"},[e("span",{class:"flex items-center justify-center w-6 h-6 shrink-0"},[e("i",{class:"fa-brands fa-instagram text-[1.7rem]"})])],-1)),e("div",Je,[(s(!0),a(Q,null,q(t(M),i=>(s(),a("button",{key:i.key,type:"button",ref_for:!0,ref:i.key==="search"?O:void 0,class:"flex items-center justify-center w-full lg:w-auto lg:justify-start px-4 lg:pl-5 lg:pr-0 py-3 lg:py-3 my-1 lg:my-1 mx-2 lg:mx-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800/80 text-black dark:text-white",onClick:S(G=>I(i),["stop"])},[e("span",Ze,[e("i",{class:y(["text-2xl",[i.active?i.iconActive:i.icon,i.key==="home"&&!i.active?"opacity-50":""]])},null,2)]),F.isMessagePage?m("",!0):(s(),a("span",Ke,C(i.label),1))],8,We))),128))]),e("button",Xe,[o[6]||(o[6]=e("span",{class:"flex items-center justify-center w-6 h-6 shrink-0"},[e("i",{class:"fa-solid fa-bars text-2xl"})],-1)),F.isMessagePage?m("",!0):(s(),a("span",Ye," 더 보기 "))])]),(s(),X(le,{to:"body"},[N(W,{"enter-active-class":"transition-opacity duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:Z(()=>[t(g)?(s(),a("div",{key:0,class:"fixed inset-0 z-[105] bg-black/25 lg:bg-transparent","aria-hidden":"true",onClick:o[0]||(o[0]=i=>g.value=!1)})):m("",!0)]),_:1}),N(W,{"enter-active-class":"transition-transform duration-300 ease-out","enter-from-class":"-translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transition-transform duration-200 ease-in","leave-from-class":"translate-x-0","leave-to-class":"-translate-x-full"},{default:Z(()=>[t(g)?(s(),a("div",{key:0,ref_key:"searchPanelRef",ref:T,class:"fixed left-0 top-0 bottom-0 w-full max-w-[397px] lg:w-[397px] bg-app shadow-xl z-[110] flex flex-col border-r border-neutral-200 dark:border-neutral-800",onClick:o[3]||(o[3]=S(()=>{},["stop"]))},[e("div",et,[e("div",tt,[o[9]||(o[9]=e("div",{class:"text-xl font-bold text-black dark:text-white"},"검색",-1)),e("button",{type:"button",class:"w-8 h-8 flex items-center justify-center rounded-full text-neutral-500 dark:text-neutral-400 hover:bg-neutral-100 dark:hover:bg-neutral-800","aria-label":"검색 닫기",onClick:o[1]||(o[1]=i=>g.value=!1)},[...o[8]||(o[8]=[e("i",{class:"fa-solid fa-xmark text-lg"},null,-1)])])]),Y(e("input",{"onUpdate:modelValue":o[2]||(o[2]=i=>te(v)?v.value=i:null),type:"search",placeholder:"검색",class:"w-full h-10 px-4 rounded-lg bg-app border border-neutral-200 dark:border-neutral-700 outline-none text-black dark:text-white placeholder-neutral-500",onInput:V},null,544),[[ee,t(v)]])]),e("div",lt,[t(b).length?(s(),a("div",st,[(s(!0),a(Q,null,q(t(b),i=>(s(),a("div",{key:i.id,class:"flex items-center gap-3 py-2 px-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 cursor-pointer",onClick:G=>U(i.name)},[o[10]||(o[10]=e("div",{class:"w-11 h-11 rounded-full bg-neutral-200 dark:bg-neutral-600 flex-shrink-0"},null,-1)),e("div",null,[e("div",nt,C(i.nickname),1),e("div",ot,C(i.name),1)])],8,at))),128))])):(s(),a("div",rt," 최근 검색 내역 없음 "))])],512)):m("",!0)]),_:1})])),N(L,{open:t(D),onClose:o[4]||(o[4]=i=>D.value=!1),onCreated:o[5]||(o[5]=i=>t(A).go(0))},null,8,["open"])],2)}}}),ct=Object.assign(it,{__name:"Menu"}),ut={class:"h-screen overflow-hidden bg-app text-white flex"},dt={class:"flex-1 min-h-0 overflow-y-auto"},ft={class:"mx-auto w-full max-w-[1400px] pb-10"},xt=H({__name:"default",setup(F){J();const k=se(),A=w(()=>k.path==="/message");return(d,n)=>(s(),a("div",ut,[N(ct,{"is-message-page":t(A),class:"flex-shrink-0"},null,8,["is-message-page"]),e("main",dt,[e("div",ft,[ge(d.$slots,"default")])])]))}});export{xt as default};
